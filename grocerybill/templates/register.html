<!DOCTYPE html>
<html>
    <head>
        <title>User Registration</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <style>
            body {
                margin: 0;
                min-height: 100vh;
                font-family: 'Segoe UI', 'Roboto', Arial, sans-serif;
                background: linear-gradient(120deg, #f4fcfa 0%, #d6f8ee 100%);
                display: flex;
                justify-content: center;
                align-items: center;
            }
            .register-card {
                background: rgba(255,255,255,0.97);
                border-radius: 18px;
                box-shadow: 0 8px 28px rgba(50,130,110,0.09);
                padding: 48px 32px 38px 32px;
                text-align: center;
                max-width: 350px;
                width: 100%;
                animation: floatIn 1.1s cubic-bezier(.31,.57,.54,.99);
            }
            @keyframes floatIn {
                from { transform: translateY(26px) scale(0.95); opacity: 0; }
                to { transform: translateY(0) scale(1.01); opacity: 1; }
            }
            .register-card h2 {
                color: #2dbc6f;
                font-size: 2em;
                margin-bottom: 16px;
                letter-spacing: 0.5px;
            }
            .anim {
                width: 78px;
                margin: 0 auto 23px auto;
                animation: floatIcon 2.2s infinite alternate ease-in-out;
                display: block;
            }
            @keyframes floatIcon {
                from { transform: translateY(0);}
                to { transform: translateY(-18px);}
            }
            .input-field {
                margin-bottom: 20px;
                width: 90%;
            }
            input[type="text"], input[type="password"] {
                width: 100%;
                padding: 10px 13px;
                margin-top: 6px;
                border: 1.5px solid #d0e5d7;
                border-radius: 7px;
                font-size: 1em;
                background: #f6fffc;
                transition: border-color 0.2s, box-shadow 0.2s;
                box-shadow: 0 1.5px 0 #eee;
                color: #1a3828;
            }
            input[type="text"]:focus, input[type="password"]:focus {
                outline: none;
                border-color: #2dbc6f;
                box-shadow: 0 0 0 2.5px #dcfaec;
            }
            button {
                width: 100%;
                background: linear-gradient(93deg, #49e397 0%, #1dbc6b 100%);
                color: white;
                font-weight: 600;
                border: none;
                border-radius: 7px;
                font-size: 1.13em;
                padding: 11px 0 12px 0;
                margin-top: 13px;
                margin-bottom: 6px;
                box-shadow: 0 4px 21px rgba(44, 108, 70, 0.09);
                cursor: pointer;
                transition: background 0.16s, transform 0.08s;
                letter-spacing: 0.3px;
            }
            button:hover {
                background: linear-gradient(93deg, #23c177 0%, #21b572 100%);
                transform: scale(1.035);
            }
            .back-link {
                font-size: 0.97em;
                color: #18995e;
                text-decoration: none;
                margin-top: 7px;
                display: inline-block;
                transition: text-decoration 0.2s;
            }
            .back-link:hover { text-decoration: underline; }
            #message {
                margin-top: 14px;
                font-weight: 600;
                min-height: 24px;
                font-size: 1em;
                transition: all 0.3s ease;
            }
            @media (max-width: 580px) {
                .register-card { padding: 28px 4vw 24px 4vw;}
                .register-card h2 { font-size: 1.3em;}
            }
        </style>
    </head>
    <body>
        <div class="register-card">
            <svg class="anim" viewBox="0 0 80 65" fill="none" xmlns="http://www.w3.org/2000/svg">
                <ellipse cx="40" cy="63" rx="33" ry="4" fill="#cef9df"/>
                <rect x="23" y="18" width="34" height="22" rx="8" fill="#57db97" />
                <rect x="18" y="16" width="44" height="7" rx="3" fill="#29be6a"/>
                <circle cx="29" cy="47" r="6" fill="#28c97d"/>
                <circle cx="51" cy="47" r="6" fill="#28c97d"/>
                <rect x="33" y="7" width="14" height="11" rx="5" fill="#e3ffe7"/>
                <rect x="21.5" y="24" width="9" height="2.5" rx="1" fill="#e4ffe9"/>
                <rect x="49.5" y="24" width="9" height="2.5" rx="1" fill="#e4ffe7"/>
            </svg>
            <h2>User Registration</h2>
            <form id="registerForm">
                <div class="input-field">
                    <input id="username" name="username" type="text" placeholder="Username" required/>
                </div>
                <div class="input-field">
                    <input id="password" name="password" type="password" placeholder="Password" required/>
                </div>
                <button type="submit">Register</button>
                <div id="message"></div>
            </form>
            <a href="/" class="back-link">&#8592; Back to Home</a>
        </div>

        <script>
            const registerForm = document.getElementById('registerForm');
            const messageDiv = document.getElementById('message');

            registerForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                messageDiv.style.color = '#000';
                messageDiv.textContent = 'Processing registration...';

                const data = {
                    username: registerForm.username.value,
                    password: registerForm.password.value
                };

                try {
                    const response = await fetch('/register', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(data)
                    });

                    const result = await response.json();

                    if (response.ok) {
                        messageDiv.style.color = '#2e7d32';
                        messageDiv.textContent = 'Registration successful! You can now log in.';
                        registerForm.reset();
                    } else {
                        messageDiv.style.color = '#d32f2f';
                        messageDiv.textContent = result.detail || 'Registration failed. Try again.';
                    }
                } catch (err) {
                    messageDiv.style.color = '#d32f2f';
                    messageDiv.textContent = 'Unexpected error occurred. Please try again.';
                }
            });
        </script>
    </body>
    </html>